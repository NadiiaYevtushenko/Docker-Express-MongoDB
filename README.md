# –ü—Ä–æ—î–∫—Ç Express.js: –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏, Cookies —Ç–∞ –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —á–µ—Ä–µ–∑ JWT

## üìå –û–ø–∏—Å

–¶–µ–π –ø—Ä–æ—î–∫—Ç —Ä–µ–∞–ª—ñ–∑—É—î —Å–µ—Ä–≤–µ—Ä –Ω–∞ Node.js –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º Express.js, —â–æ –¥–µ–º–æ–Ω—Å—Ç—Ä—É—î:

- –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤ (–≤–∫–ª—é—á–Ω–æ –∑ favicon)
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é cookies (–ø–µ—Ä–µ–º–∏–∫–∞—á —Ç–µ–º–∏)
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º JWT, –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö —É cookies –∑ –æ–ø—Ü—ñ—î—é `httpOnly`
- –°–µ—Ä–≤–µ—Ä–Ω–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é —à–∞–±–ª–æ–Ω—ñ–≤ PUG

---

## üõ† –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Node.js** ‚Äî —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- **Express.js** ‚Äî –≤–µ–±—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **PUG** ‚Äî —à–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä HTML –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ
- **cookie-parser** ‚Äî –¥–ª—è –æ–±—Ä–æ–±–∫–∏ cookies
- **jsonwebtoken** ‚Äî –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ JWT
- **cors** ‚Äî middleware –¥–ª—è –æ–±—Ä–æ–±–∫–∏ CORS
- **JavaScript** ‚Äî –¥–ª—è –∫–ª—ñ—î–Ω—Ç—Å—å–∫–æ—ó –ª–æ–≥—ñ–∫–∏ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è —Ç–µ–º–∏
- **–°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏** ‚Äî CSS, JS, favicon

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

````
.
‚îú‚îÄ‚îÄ app.js                         # –û—Å–Ω–æ–≤–Ω–∏–π —Å–µ—Ä–≤–µ—Ä Express
‚îú‚îÄ‚îÄ package.json                   # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Ç–∞ –º–µ—Ç–∞—ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ package-lock.json              # –§—ñ–∫—Å–∞—Ü—ñ—è –≤–µ—Ä—Å—ñ–π –ø–∞–∫–µ—Ç—ñ–≤
‚îú‚îÄ‚îÄ README.md                      # –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–æ –ø—Ä–æ—î–∫—Ç—É
‚îú‚îÄ‚îÄ public/                        # –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ icons/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ favicon.ico            # Favicon –¥–ª—è —Å–∞–π—Ç—É
‚îÇ   ‚îú‚îÄ‚îÄ images/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ picLogo.png            # –õ–æ–≥–æ—Ç–∏–ø –∞–±–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ theme.js               # –õ–æ–≥—ñ–∫–∞ –ø–µ—Ä–µ–º–∏–∫–∞—á–∞ —Ç–µ–º–∏ (fetch + cookie)
‚îÇ   ‚îî‚îÄ‚îÄ styles/
‚îÇ       ‚îú‚îÄ‚îÄ style.css              # –û—Å–Ω–æ–≤–Ω—ñ —Å—Ç–∏–ª—ñ —Å–∞–π—Ç—É
‚îÇ       ‚îî‚îÄ‚îÄ test-login.html        # –¢–µ—Å—Ç–æ–≤–∏–π HTML –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ JWT-cookie
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îî‚îÄ‚îÄ layout.pug                 # PUG-—à–∞–±–ª–æ–Ω —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (–≥–æ–ª–æ–≤–Ω–∞ —Ä–æ–∑–º—ñ—Ç–∫–∞)

---

## üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

1. **–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π**

   ```bash
   npm install
````

2. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞**

   ```bash
   node app.js
   ```

3. **–í—ñ–¥–∫—Ä–∏–π —É –±—Ä–∞—É–∑–µ—Ä—ñ**
   ```
   http://localhost:3000/
   ```

---

## ‚úÖ –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –¢–ó —Ç–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏

### 1. ‚úÖ –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏

- **Favicon**: —Ä–æ–∑–º—ñ—â–µ–Ω–æ –≤ `public/icons/favicon.ico`
- **–£ —à–∞–±–ª–æ–Ω—ñ PUG**:
  ```pug
  link(rel="icon", href="/icons/favicon.ico", type="image/x-icon")
  ```
- **–Ü–Ω—à—ñ —Ñ–∞–π–ª–∏**: —Å—Ç–∏–ª—ñ, —Å–∫—Ä–∏–ø—Ç–∏, –∫–∞—Ä—Ç–∏–Ω–∫–∏ ‚Äî –æ–±—Å–ª—É–≥–æ–≤—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ `express.static('public')`

> üîé **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞**:
>
> - DevTools ‚Üí Network ‚Üí —Ñ–∞–π–ª `favicon.ico` –º–∞—î –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏—Å—å –∑ 200 OK
> - –Ø–∫—â–æ —Ñ–∞–π–ª —É–∂–µ –∫–µ—à–æ–≤–∞–Ω–∏–π ‚Äî –±—É–¥–µ 304 Not Modified
> - URL: `/icons/favicon.ico`

---

### 2. ‚úÖ Cookies ‚Äî –ø–µ—Ä–µ–º–∏–∫–∞—á —Ç–µ–º–∏

- –ú–∞—Ä—à—Ä—É—Ç: `POST /set-theme`
- –ó–±–µ—Ä—ñ–≥–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è `theme` (`light` –∞–±–æ `dark`) —É cookie
- Cookie –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –∑:
  - `httpOnly: true`
  - `sameSite: 'Lax'`
  - `secure: false` (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É)

> üîé **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞**:
>
> - –í—ñ–¥–∫—Ä–∏–π —Å—Ç–æ—Ä—ñ–Ω–∫—É ‚Üí –Ω–∞—Ç–∏—Å–Ω–∏ –∫–Ω–æ–ø–∫—É `Toggle Theme`
> - –í—ñ–¥–∫—Ä–∏–π DevTools ‚Üí Application ‚Üí Cookies
> - –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è, —â–æ cookie `theme` –∑–º—ñ–Ω—é—î—Ç—å—Å—è

---

### 3. ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —á–µ—Ä–µ–∑ JWT

- **–ú–∞—Ä—à—Ä—É—Ç–∏:**
  - `POST /register` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω–∞
  - `POST /login` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω–∞
- **JWT-—Ç–æ–∫–µ–Ω:**

  - —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ `jsonwebtoken`
  - –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —è–∫ cookie `token` –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:
    - `httpOnly: true` ‚Äî –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –∑ JavaScript
    - `sameSite: 'Lax'` ‚Äî –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ CSRF
    - `secure: false` ‚Äî –¥–æ–∑–≤–æ–ª–µ–Ω–æ –¥–ª—è `http://localhost`

- **Middleware:** `authenticateToken` –ø–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ç–∞ –¥—ñ–π—Å–Ω—ñ—Å—Ç—å —Ç–æ–∫–µ–Ω–∞ –∑ cookie
- **–ó–∞—Ö–∏—â–µ–Ω–∏–π –º–∞—Ä—à—Ä—É—Ç:** `GET /profile` –ø–æ–≤–µ—Ä—Ç–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ª–∏—à–µ –∑–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –≤–∞–ª—ñ–¥–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞

> üîé **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
>
> - –ù–∞–¥—ñ—à–ª–∏ `POST /login` –∞–±–æ `POST /register` —á–µ—Ä–µ–∑ Postman –∞–±–æ –±—Ä–∞—É–∑–µ—Ä  
>   (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: [http://localhost:3000/login](http://localhost:3000/login))
> - –£ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –±—É–¥–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Set-Cookie: token=...`
> - –ó—Ä–æ–±–∏ `GET /profile` ‚Äî –º–∞—î –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ JSON –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º, —è–∫—â–æ —Ç–æ–∫–µ–Ω –≤–∞–ª—ñ–¥–Ω–∏–π
>
> üß™ –î–ª—è –∑—Ä—É—á–Ω–æ—Å—Ç—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–≤–æ—Ä–µ–Ω–æ —Ñ–∞–π–ª **`public/styles/test-login.html`**  
> –í—ñ–¥–∫—Ä–∏–π –π–æ–≥–æ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä:
> [http://localhost:3000/styles/test-login.html](http://localhost:3000/styles/test-login.html)  
> —ñ –Ω–∞—Ç–∏—Å–Ω–∏ –∫–Ω–æ–ø–∫—É ‚Äî –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–æ `fetch()` –¥–æ `/login`, –∞ —Ç–æ–∫–µ–Ω –∑–±–µ—Ä–µ–∂–µ—Ç—å—Å—è –≤ cookies.
>
> ‚úÖ –ü—ñ—Å–ª—è —Ü—å–æ–≥–æ —Ç–∞–∫–æ–∂ –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å favicon —è–∫ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è —Ä–æ–±–æ—Ç–∏ —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤:
> [http://localhost:3000/icons/favicon.ico](http://localhost:3000/icons/favicon.ico)

---

## üîí –ë–µ–∑–ø–µ–∫–∞

- Cookie –∑ —Ç–æ–∫–µ–Ω–æ–º –º–∞—î `httpOnly` —ñ `sameSite` ‚Üí –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ XSS —Ç–∞ CSRF
- –£ –ø—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏:
  ```js
  secure: true; // –¥–ª—è HTTPS
  ```

---
